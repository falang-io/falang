if неправильно себя подгоняет
только isSwitch используется, надо еще проверять на if и на любые макроиконы